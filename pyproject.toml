[project]
name = "fcs-order"
version = "2.0"
description = "Third-order force constants calculation tool for VASP"
readme = "README.md"
requires-python = ">=3.9"
dependencies = [
    "ase>=3.22.1",
    "click>=8.1.8",
    "numpy>=1.21.6",
    "scipy>=1.7.3",
    "spglib>=2.2.0",
]

[project.optional-dependencies]
deepmd = [
    "deepmd-kit>=2.2.0", # DeepMD potential support
]

hiphive = [
    "hiphive>=0.6", # Force constant potential with hiphive
]

mlp = [
    "pypolymlp>=0.15", # MLP potential (requires Eigen3 system library)
]

calorine = [
    "calorine>=1.0", # Calorine potential support
]

all = [
    "deepmd-kit>=2.2.0",
    "hiphive>=0.6", 
    "calorine>=1.0",
    "pypolymlp>=0.15",
]

# Build and Release Instructions
# ==============================
# 
# 1. Build source package:
#    uv build --sdist
#
# 2. Upload to PyPI (requires API Token):
#    twine upload dist/fcs_order-X.Y.Z.tar.gz
#
# 3. Install for testing:
#    pip install fcs-order
#
# 4. Install optional dependencies:
#    pip install "fcs-order[deepmd]"      # DeepMD support
#    pip install "fcs-order[hiphive]"     # hiphive support  
#    pip install "fcs-order[calorine]"    # calorine support
#    pip install "fcs-order[all]"         # All optional dependencies
#
# Notes:
# - Update version field before each release
# - Only upload source package (sdist), avoid platform-specific wheels
# - pypolymlp in optional dependencies requires system Eigen3 library, moved to separate group
#
# Release URL: https://pypi.org/project/fcs-order/

[project.scripts]
fcsorder = "fcs_order.__init__:cli"

[build-system]
requires = ["setuptools>=45", "wheel", "cython>=3.0.12", "numpy>=1.21.6", "spglib>=2.2.0"]
build-backend = "setuptools.build_meta"

[[tool.uv.index]]
url = "https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple"
default = true

